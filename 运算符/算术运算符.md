# 一、加法运算符

### 基本规则
JavaScript 允许非数值的相加。
```js
true + true // 2
1 + true // 2
```
两个字符串相加
```js
'a' + 'bc' // "abc"
```
字符串与非字符串相加
```js
// 只要有一个运算子是字符串，加法运算符就变成连接运算符，返回连接后的字符串。
1 + 'a' // "1a"
false + 'a' // "falsea"
```
### 重载
加法运算符是在运行时决定，到底是执行相加，还是执行连接。也就是说，**运算子的不同，导致了不同的语法行为，这种现象称为“重载”（overload）**。由于加法运算符存在重载，可能执行两种运算，使用的时候必须很小心。
```js
'3' + 4 + 5 // "345"
3 + 4 + '5' // "75"
```
除了加法运算符，其他算术运算符（比如减法、除法和乘法）都不会发生重载。它们的规则是：**所有运算子一律转为数值，再进行相应的数学运算**。
```js
1 - '2' // -1
1 * '2' // 2
1 / '2' // 0.5
```

# 对象的相加

### 基本规则
如果运算子是对象，必须**先转成原始类型的值**，然后再相加。
```js
var obj = { p: 1 };
obj + 2 // "[object Object]2"
```
### 对象转成原始类型的值
1. 自动调用对象的`valueOf`方法（先执行）
```js
var obj = { p: 1 };
obj.valueOf() // { p: 1 }
// 对象的valueOf方法总是返回对象自身
```
2. 自动调用对象的`toString`方法（后执行）
```js
var obj = { p: 1 };
obj.valueOf().toString() // "[object Object]"
```
### 自定义 valueOf 方法和 toString 方法
```js
var obj = {
  valueOf: function () {
    return 1; // obj对象的valueOf方法返回1，直接返回的就是原始类型的值，所以不再调用toString方法。
  }
};

obj + 2 // 3
```
```js
var obj = {
  toString: function () {
    return 'hello';
  }
};

obj + 2 // "hello2"
```
### 特例
如果运算子是一个`Date`对象的实例，那么会优先执行`toString`方法。
```js
var obj = new Date();
obj.valueOf = function () { return 1 };
obj.toString = function () { return 'hello' };

obj + 2 // "hello2"
```

# 二、余数运算符

```js
12 % 5 // 2
```
注意：运算结果的正负号由第一个运算子的正负号决定。
```js
-1 % 2 // -1
1 % -2 // 1
```
所以，为了得到负数的正确余数值，可以先使用绝对值函数。
```js
// 错误的写法
function isOdd(n) {
  return n % 2 === 1;
}
isOdd(-5) // false
isOdd(-4) // false

// 正确的写法
function isOdd(n) {
  return Math.abs(n % 2) === 1;
}
isOdd(-5) // true
isOdd(-4) // false
```

# 三、自增和自减运算符

自增和自减运算符将运算子**首先转为数值**，然后加上1或者减去1。它们**会修改原始变量**。
```js
var x = 1;
++x // 2
x // 2

--x // 1
x // 1
```
注意：
1. 运算之后，变量的值发生变化，这种效应叫做**运算的副作用**（side effect）。自增和自减运算符是仅有的两个具有副作用的运算符，其他运算符都不会改变变量的值。

2. 自增和自减运算符放在变量之后，会先返回变量操作前的值，再进行自增/自减操作；放在变量之前，会先进行自增/自减操作，再返回变量操作后的值。
```js
var x = 1;
var y = 1;

x++ // 1
++y // 2
```

# 四、数值运算符，负数值运算符

### 1. 数值运算符（+）
数值运算符的作用在于可以将任何值转为数值（与`Number`函数的作用相同）。
```js
+true // 1
+[] // 0
+{} // NaN
```
### 2. 负数值运算符（-）
它和数值运算符的功能相同，只不过得到的值正负相反。连用两个负数值运算符，等同于数值运算符。
```js
var x = 1;
-x // -1
-(-x) // 1
```

# 五、指数运算符

指数运算符是**右结合**，而不是左结合。即多个指数运算符连用时，先进行最右边的计算。
```js
// 相当于 2 ** (3 ** 2)
2 ** 3 ** 2
// 512
```

# 六、赋值运算符

```js
// 等同于 x = x + y
x += y

// 等同于 x = x - y
x -= y

// 等同于 x = x * y
x *= y

// 等同于 x = x / y
x /= y

// 等同于 x = x % y
x %= y

// 等同于 x = x ** y
x **= y
```
